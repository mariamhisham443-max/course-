"use strict";(globalThis.wpRiseJsonp=globalThis.wpRiseJsonp||[]).push([["recorder"],{23600(on,me,S){S.d(me,{startRecording:()=>nn});var U=S(48247),ye=S(59825),B=S(32973),T=S(19657),f=S(80911),m=S(97182),A=S(94541);const y={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9,Change:12},w={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},g={AddString:0,AddNode:1,RemoveNode:2,Attribute:3,Text:4,Size:5,ScrollPosition:6,AddStyleSheet:7,AttachedStyleSheets:8,MediaPlaybackState:9,VisualViewport:10},sn={Playing:0,Paused:1},I={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},E={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},D={Play:0,Pause:1};var Ie=S(59646);function P(e,n){const t=e.tagName,o=e.value;if((0,f.Ie)(e,n)){const s=e.type;return t==="INPUT"&&(s==="button"||s==="submit"||s==="reset")?o:!o||t==="OPTION"?void 0:f.o}if(t==="OPTION"||t==="SELECT")return e.value;if(!(t!=="INPUT"&&t!=="TEXTAREA"))return o}const Te=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,Ee=/^[A-Za-z]+:|^\/\//,Ne=/^["']?data:.*,/i;function ve(e,n){return e.replace(Te,(t,o,s,r,i,a)=>{const u=s||i||a;if(!n||!u||Ee.test(u)||Ne.test(u))return t;const d=o||r||"";return`url(${d}${Ce(u,n)}${d})`})}function Ce(e,n){try{return(0,Ie.c$)(e,n).href}catch{return e}}const we=/[^a-z1-6-_]/;function be(e){const n=e.toLowerCase().trim();return we.test(n)?"div":n}function G(e){return e.tagName.toLowerCase()}function J(e,n){return`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${n}' style='background-color:silver'%3E%3C/svg%3E`}function X(e,n){if(e===void 0||e.length===0)return;const t=s=>{const r=s.cssRules||s.rules,i=Array.from(r,u=>u.cssText);return n.addMetric("cssText",i.reduce((u,d)=>u+d.length,0)),{cssRules:i,disabled:s.disabled||void 0,media:s.media.length>0?Array.from(s.media):void 0}},o=[];for(let s=0;s<e.length;s++)o.push(t(e[s]));return o}var Me=S(90765);const Re=1e6;function Y(e,n,t,o){if(n===f.$m.HIDDEN)return null;const s=e.getAttribute(t),r=e.tagName;if((0,f.ap)(r,t,s,n,o)){if(r==="IMG"){const i=e;if(i.naturalWidth>0)return J(i.naturalWidth,i.naturalHeight);const{width:a,height:u}=e.getBoundingClientRect();return a>0||u>0?J(a,u):f.eT}return r==="SOURCE"?f.eT:f.o}return s&&(0,f.ei)(s,Re)}function xe(e,n,t){return{...W(e,n,t),...j(e,n,t)}}function W(e,n,t){if(n===f.$m.HIDDEN)return{};const o={},s=G(e);for(let i=0;i<e.attributes.length;i+=1){const u=e.attributes.item(i).name,d=Y(e,n,u,t.scope.configuration);d!==null&&(o[u]=d)}if(e.value&&(s==="textarea"||s==="select"||s==="option"||s==="input")){const i=P(e,n);i!==void 0&&(o.value=i)}if(s==="option"){const i=e;i.selected&&!(0,f.Ie)(i,n)?o.selected="":delete o.selected}const r=e;return s==="input"&&(r.type==="radio"||r.type==="checkbox")&&(r.checked&&!(0,f.Ie)(r,n)?o.checked="":delete o.checked),o}function j(e,n,t){if(n===f.$m.HIDDEN)return{};const o={},s=e.ownerDocument,r=G(e);if(r==="link"){const u=Array.from(s.styleSheets).find(l=>l.href===e.href),d=L(u);d&&u&&(t.addMetric("cssText",d.length),o._cssText=d)}if(r==="style"&&e.sheet){const u=L(e.sheet);u&&(t.addMetric("cssText",u.length),o._cssText=u)}if(r==="audio"||r==="video"){const u=e;o.rr_mediaState=u.paused?"paused":"played"}let i,a;switch(t.kind){case 0:i=Math.round(e.scrollTop),a=Math.round(e.scrollLeft),(i||a)&&t.scope.elementsScrollPositions.set(e,{scrollTop:i,scrollLeft:a});break;case 1:t.scope.elementsScrollPositions.has(e)&&({scrollTop:i,scrollLeft:a}=t.scope.elementsScrollPositions.get(e));break}return a&&(o.rr_scrollLeft=a),i&&(o.rr_scrollTop=i),o}function L(e){if(!e)return null;let n;try{n=e.rules||e.cssRules}catch{}if(!n)return null;const t=Array.from(n,(0,Me.nr)()?Ae:K).join("");return ve(t,e.href)}function Ae(e){if(Oe(e)&&e.selectorText.includes(":")){const n=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return e.cssText.replace(n,"$1\\$2")}return K(e)}function K(e){return De(e)&&L(e.styleSheet)||e.cssText}function De(e){return"styleSheet"in e}function Oe(e){return"selectorText"in e}function V(e,n,t){switch(e.nodeType){case e.DOCUMENT_NODE:return ze(e,n,t);case e.DOCUMENT_FRAGMENT_NODE:return Pe(e,n,t);case e.DOCUMENT_TYPE_NODE:return Le(e,t);case e.ELEMENT_NODE:return Ve(e,n,t);case e.TEXT_NODE:return Fe(e,n,t);case e.CDATA_SECTION_NODE:return _e(e,t);default:return null}}function k(e,n,t){const o=[];return(0,f.wI)(e,s=>{const r=V(s,n,t);r&&o.push(r)}),o}function ze(e,n,t){return{type:w.Document,id:t.assignId(e),childNodes:k(e,n,t),adoptedStyleSheets:X(e.adoptedStyleSheets,t)}}function Pe(e,n,t){const o=(0,f.p_)(e);return o&&t.scope.shadowRootsController.addShadowRoot(e,t.scope),{type:w.DocumentFragment,id:t.assignId(e),childNodes:k(e,n,t),isShadowRoot:o,adoptedStyleSheets:o?X(e.adoptedStyleSheets,t):void 0}}function Le(e,n){return{type:w.DocumentType,id:n.assignId(e),name:e.name,publicId:e.publicId,systemId:e.systemId}}function Ve(e,n,t){const o=be(e.tagName),s=ke(e)||void 0,r=(0,f.jR)((0,f.dT)(e),n);if(r===f.$m.HIDDEN){const{width:d,height:l}=e.getBoundingClientRect();return{type:w.Element,id:t.assignId(e),tagName:o,attributes:{rr_width:`${d}px`,rr_height:`${l}px`,[f.NT]:f.Wd},childNodes:[],isSVG:s}}if(r===f.$m.IGNORE)return null;const i=t.assignId(e),a=xe(e,r,t);let u=[];return(0,f.wR)(e)&&o!=="style"&&(u=k(e,r,t)),{type:w.Element,id:i,tagName:o,attributes:a,childNodes:u,isSVG:s}}function ke(e){return e.tagName==="svg"||e instanceof SVGElement}function Fe(e,n,t){const o=(0,f.rf)(e,n);return o===void 0?null:{type:w.Text,id:t.assignId(e),textContent:o}}function _e(e,n){return{type:w.CDATA,id:n.assignId(e),textContent:""}}function F(){return{cssText:{count:0,max:0,sum:0},serializationDuration:{count:0,max:0,sum:0}}}function O(e,n,t){e[n].count+=1,e[n].max=Math.max(e[n].max,t),e[n].sum+=t}function He(e,n){for(const t of["cssText","serializationDuration"])e[t].count+=n[t].count,e[t].max=Math.max(e[t].max,n[t].max),e[t].sum+=n[t].sum}function $e(e){let n={};const t=r=>{for(let i=0,a=r.length;i<a;i++){const u=r[i];if(typeof u=="string"){const d=e.size;r[i]=e.getOrInsert(u),e.size>d&&o(g.AddString,u)}else Array.isArray(u)&&t(u)}},o=(r,i)=>{r in n||(n[r]=[r]),r!==g.AddString&&Array.isArray(i)&&t(i),n[r].push(i)};return{add:o,flush:()=>{const r=[];return[g.AddString,g.AddNode,g.RemoveNode,g.Attribute,g.Text,g.Size,g.ScrollPosition,g.AddStyleSheet,g.AttachedStyleSheets,g.MediaPlaybackState,g.VisualViewport].forEach(i=>{const a=n[i];a&&r.push(a)}),n={},r}}}function Z(e,n,t,o,s){const r=[],i=F(),a={add(d){r.push(d)},addMetric(d,l){O(i,d,l)},assignId(d){const l=o.nodeIds.getOrInsert(d);return a.serializedNodeIds&&a.serializedNodeIds.add(l),l},kind:e,scope:o},u=(0,m.nx)();s(a),O(i,"serializationDuration",(0,m.vk)(u,(0,m.nx)()));for(const d of r)n(d);t(i)}function Ue(e,n,t,o,s,r){const i=$e(o.stringIds),a=F(),u={addMetric(c,p){O(a,c,p)},addNode(...c){i.add(g.AddNode,c)},addStyleSheet(c,p,h){h?i.add(g.AddStyleSheet,[c,p||[],h]):p?i.add(g.AddStyleSheet,[c,p]):i.add(g.AddStyleSheet,[c])},attachStyleSheets(c,p){const h=[c];for(const v of p)h.push(v);i.add(g.AttachedStyleSheets,h)},setMediaPlaybackState(c,p){i.add(g.MediaPlaybackState,[c,p])},setScrollPosition(c,p,h){i.add(g.ScrollPosition,[c,p,h])},setSize(c,p,h){i.add(g.Size,[c,p,h])},kind:e,scope:o},d=(0,m.nx)();r(u),O(a,"serializationDuration",(0,m.vk)(d,(0,m.nx)()));const l=i.flush();l.length>0&&n({data:l,type:y.Change,timestamp:s}),t(a)}function Be(e,n,t,o,s,r){Z(n,o,s,r,i=>{const a=i.scope.configuration.defaultPrivacyLevel,d={data:{node:V(t,a,i),initialOffset:{left:(0,f.Gn)(),top:(0,f.zL)()}},type:y.FullSnapshot,timestamp:e};i.add(d)})}function Q(e,n,t,o){let s;const r=(0,f.dT)(n);if(r?s=(0,f.jR)(r,t):s=t,s===f.$m.HIDDEN){Ke(e,n,o);return}if(s!==f.$m.IGNORE){switch(n.nodeType){case n.CDATA_SECTION_NODE:je(e,n,o);break;case n.DOCUMENT_NODE:Ge(e,n,o);break;case n.DOCUMENT_FRAGMENT_NODE:Je(e,n,o);break;case n.DOCUMENT_TYPE_NODE:Xe(e,n,o);break;case n.ELEMENT_NODE:Ye(e,n,s,o);break;case n.TEXT_NODE:We(e,n,s,o);break;default:return}switch(n.nodeType){case n.CDATA_SECTION_NODE:case n.DOCUMENT_TYPE_NODE:case n.TEXT_NODE:return}n.nodeName!=="STYLE"&&(e.descend(),(0,f.wI)(n,i=>{Q(e,i,s,o)}),e.ascend())}}function Ge(e,n,t){const{nodeId:o,insertionPoint:s}=e.advance(n);t.addNode(s,"#document"),t.setScrollPosition(o,(0,f.Gn)(),(0,f.zL)()),q(n.adoptedStyleSheets,o,t)}function Je(e,n,t){const{nodeId:o,insertionPoint:s}=e.advance(n);if(!(0,f.p_)(n)){t.addNode(s,"#document-fragment");return}t.addNode(s,"#shadow-root"),t.scope.shadowRootsController.addShadowRoot(n,t.scope),q(n.adoptedStyleSheets,o,t)}function Xe(e,n,t){const{insertionPoint:o}=e.advance(n);t.addNode(o,"#doctype",n.name,n.publicId,n.systemId)}function Ye(e,n,t,o){const{nodeId:s,insertionPoint:r}=e.advance(n),i=Object.entries(W(n,t,o));o.addNode(r,ee(n),...i);const{_cssText:a,rr_mediaState:u,rr_scrollLeft:d,rr_scrollTop:l}=j(n,t,o),c=n;if(a!==void 0&&c.sheet){const p=o.scope.styleSheetIds.getOrInsert(c.sheet);o.addStyleSheet(a),o.attachStyleSheets(s,[p])}u==="played"?o.setMediaPlaybackState(s,D.Play):u==="paused"&&o.setMediaPlaybackState(s,D.Pause),(d!==void 0||l!==void 0)&&o.setScrollPosition(s,d||0,l||0)}function We(e,n,t,o){const s=(0,f.rf)(n,t);if(s===void 0)return;const{insertionPoint:r}=e.advance(n);o.addNode(r,"#text",s)}function je(e,n,t){const{insertionPoint:o}=e.advance(n);t.addNode(o,"#cdata-section")}function Ke(e,n,t){if(!(0,f.nS)(n))return;const{nodeId:o,insertionPoint:s}=e.advance(n);t.addNode(s,ee(n),[f.NT,f.Wd]);const{width:r,height:i}=n.getBoundingClientRect();t.setSize(o,r,i)}function q(e,n,t){!e||e.length===0||t.attachStyleSheets(n,e.map(o=>Ze(o,t)))}function Ze(e,n){const t=Array.from(e.cssRules||e.rules,s=>s.cssText),o=e.media.length>0?Array.from(e.media):void 0;return n.addMetric("cssText",t.reduce((s,r)=>s+r.length,0)),n.addStyleSheet(t,o,e.disabled),n.scope.styleSheetIds.getOrInsert(e)}function ee(e){const n=e.nodeName;return Qe(e)?`svg>${n}`:n}function Qe(e){return e.namespaceURI==="http://www.w3.org/2000/svg"}function qe(e){return te(void 0,void 0,e)}function rn(e,n,t){return te(e,n,t)}function te(e,n,t){let o={container:void 0,parentId:e,previousSiblingId:void 0,nextSiblingId:n};const s=r=>o.previousSiblingId===r-1?0:o.nextSiblingId!==void 0?o.nextSiblingId-r:o.parentId!==void 0?r-o.parentId:null;return{advance(r){const i=t.getOrInsert(r),a=s(i);return o.previousSiblingId=i,{nodeId:i,insertionPoint:a}},ascend(){o.container&&(o=o.container)},descend(){o.previousSiblingId!==void 0&&(o={container:o,parentId:o.previousSiblingId,previousSiblingId:void 0,nextSiblingId:void 0})}}}function et(e,n,t,o,s,r){r.resetIds(),Ue(n,o,s,r,e,i=>{Q(qe(r.nodeIds),t,r.configuration.defaultPrivacyLevel,i)})}function N(e,n,t=(0,m.nx)()){return{data:{source:e,...n},type:y.IncrementalSnapshot,timestamp:t}}function tt(e,n,t,o,s){Z(2,t,o,s,r=>nt(e,n,r))}function nt(e,n,t){const o=new Map;n.filter(c=>c.type==="childList").forEach(c=>{c.removedNodes.forEach(p=>{ne(p,t.scope.shadowRootsController.removeShadowRoot)})});const s=n.filter(c=>c.target.isConnected&&at(c.target,t.scope.nodeIds)&&(0,f.PJ)(c.target,t.scope.configuration.defaultPrivacyLevel,o)!==f.$m.HIDDEN),{adds:r,removes:i,hasBeenSerialized:a}=ot(s.filter(c=>c.type==="childList"),o,t),u=st(s.filter(c=>c.type==="characterData"&&!a(c.target)),o,t),d=rt(s.filter(c=>c.type==="attributes"&&!a(c.target)),o,t);if(!u.length&&!d.length&&!i.length&&!r.length)return;const l=N(I.Mutation,{adds:r,removes:i,texts:u,attributes:d},e);t.add(l)}function ot(e,n,t){const o=new Set,s=new Map;for(const l of e)l.addedNodes.forEach(c=>{o.add(c)}),l.removedNodes.forEach(c=>{o.has(c)||s.set(c,l.target),o.delete(c)});const r=Array.from(o);it(r),t.serializedNodeIds=new Set;const i=[];for(const l of r){if(u(l))continue;const c=(0,f.PJ)(l.parentNode,t.scope.configuration.defaultPrivacyLevel,n);if(c===f.$m.HIDDEN||c===f.$m.IGNORE)continue;const p=V(l,c,t);if(!p)continue;const h=(0,f.$4)(l);i.push({nextId:d(l),parentId:t.scope.nodeIds.get(h),node:p})}const a=[];return s.forEach((l,c)=>{const p=t.scope.nodeIds.get(l),h=t.scope.nodeIds.get(c);p!==void 0&&h!==void 0&&a.push({parentId:p,id:h})}),{adds:i,removes:a,hasBeenSerialized:u};function u(l){var c;const p=t.scope.nodeIds.get(l);return p!==void 0&&((c=t.serializedNodeIds)===null||c===void 0?void 0:c.has(p))}function d(l){let c=l.nextSibling;for(;c;){const p=t.scope.nodeIds.get(c);if(p!==void 0)return p;c=c.nextSibling}return null}}function st(e,n,t){var o;const s=[],r=new Set,i=e.filter(a=>r.has(a.target)?!1:(r.add(a.target),!0));for(const a of i){if(a.target.textContent===a.oldValue)continue;const d=t.scope.nodeIds.get(a.target);if(d===void 0)continue;const l=(0,f.PJ)((0,f.$4)(a.target),t.scope.configuration.defaultPrivacyLevel,n);l===f.$m.HIDDEN||l===f.$m.IGNORE||s.push({id:d,value:(o=(0,f.rf)(a.target,l))!==null&&o!==void 0?o:null})}return s}function rt(e,n,t){const o=[],s=new Map,r=e.filter(a=>{const u=s.get(a.target);return u&&u.has(a.attributeName)?!1:(u?u.add(a.attributeName):s.set(a.target,new Set([a.attributeName])),!0)}),i=new Map;for(const a of r){if(a.target.getAttribute(a.attributeName)===a.oldValue)continue;const d=t.scope.nodeIds.get(a.target);if(d===void 0)continue;const l=(0,f.PJ)(a.target,t.scope.configuration.defaultPrivacyLevel,n),c=Y(a.target,l,a.attributeName,t.scope.configuration);let p;if(a.attributeName==="value"){const v=P(a.target,l);if(v===void 0)continue;p=v}else typeof c=="string"?p=c:p=null;let h=i.get(a.target);h||(h={id:d,attributes:{}},o.push(h),i.set(a.target,h)),h.attributes[a.attributeName]=p}return o}function it(e){e.sort((n,t)=>{const o=n.compareDocumentPosition(t);return o&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:o&Node.DOCUMENT_POSITION_CONTAINS||o&Node.DOCUMENT_POSITION_FOLLOWING?1:o&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}function ne(e,n){(0,f.XS)(e)&&n(e.shadowRoot),(0,f.wI)(e,t=>ne(t,n))}function at(e,n){let t=e;for(;t;){if(n.get(t)===void 0&&!(0,f.p_)(t))return!1;t=(0,f.$4)(t)}return!0}const oe=25;function ut(e){return Math.abs(e.pageTop-e.offsetTop-window.scrollY)>oe||Math.abs(e.pageLeft-e.offsetLeft-window.scrollX)>oe}const ct=(e,n)=>{const t=window.visualViewport,o={layoutViewportX:e,layoutViewportY:n,visualViewportX:e,visualViewportY:n};if(t)ut(t)?(o.layoutViewportX=Math.round(e+t.offsetLeft),o.layoutViewportY=Math.round(n+t.offsetTop)):(o.visualViewportX=Math.round(e-t.offsetLeft),o.visualViewportY=Math.round(n-t.offsetTop));else return o;return o},se=e=>({scale:e.scale,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,pageLeft:e.pageLeft,pageTop:e.pageTop,height:e.height,width:e.width});function dt(e,n,t,o,s,r=ie()){re((0,m.nx)(),0,n,t,s,r);const{unsubscribe:i}=e.subscribe(2,a=>{o(),re(a.startClocks.timeStamp,1,n,t,s,r)});return{stop:i}}function re(e,n,t,o,s,r=ie()){const{width:i,height:a}=(0,f.pB)();t({data:{height:a,href:window.location.href,width:i},type:y.Meta,timestamp:e}),t({data:{has_focus:document.hasFocus()},type:y.Focus,timestamp:e}),r(e,n,document,t,o,s),window.visualViewport&&t({data:se(window.visualViewport),type:y.VisualViewport,timestamp:e})}function ie(){return(0,A.sr)(A.R9.USE_CHANGE_RECORDS)?et:Be}var lt,b,ft,_,pt,ht,gt,St,mt;function an({configuration:e}={}){const n=[],t=o=>{n.push(o)};return pt(lt(),0,t,b,ae(e)),n}function un(e,{configuration:n}={}){let t=null;return St(0,b,b,ae(n),o=>{const s=ft(e,o.scope.configuration.defaultPrivacyLevel);s===_.HIDDEN||s===_.IGNORE||(t=mt(e,s,o))}),t}function ae(e){return ht({defaultPrivacyLevel:_.ALLOW,...e},gt(),{addShadowRoot:b,removeShadowRoot:b,flush:b,stop:b})}var yt=S(78666),z=S(95962),M=S(24564);function ue(e){return!!e.changedTouches}function R(e){return e.composed===!0&&(0,f.XS)(e.target)?e.composedPath()[0]:e.target}const It=50;function Tt(e,n){const{throttled:t,cancel:o}=(0,T.n)(r=>{const i=R(r),a=n.nodeIds.get(i);if(a===void 0)return;const u=ce(r);if(!u)return;const d={id:a,timeOffset:0,x:u.x,y:u.y};e(N(ue(r)?I.TouchMove:I.MouseMove,{positions:[d]}))},It,{trailing:!1}),{stop:s}=(0,M.l)(n.configuration,document,["mousemove","touchmove"],t,{capture:!0,passive:!0});return{stop:()=>{s(),o()}}}function ce(e){let{clientX:n,clientY:t}=ue(e)?e.changedTouches[0]:e;if(window.visualViewport){const{visualViewportX:o,visualViewportY:s}=ct(n,t);n=o,t=s}if(!(!Number.isFinite(n)||!Number.isFinite(t)))return{x:n,y:t}}const de={pointerup:E.MouseUp,mousedown:E.MouseDown,click:E.Click,contextmenu:E.ContextMenu,dblclick:E.DblClick,focus:E.Focus,blur:E.Blur,touchstart:E.TouchStart,touchend:E.TouchEnd};function Et(e,n){const t=o=>{const s=R(o),r=n.nodeIds.get(s);if(r===void 0||(0,f.PJ)(s,n.configuration.defaultPrivacyLevel)===f.$m.HIDDEN)return;const i=de[o.type];let a;if(i!==E.Blur&&i!==E.Focus){const u=ce(o);if(!u)return;a={id:r,type:i,x:u.x,y:u.y}}else a={id:r,type:i};e({id:n.eventIds.getOrInsert(o),...N(I.MouseInteraction,a)})};return(0,M.l)(n.configuration,document,Object.keys(de),t,{capture:!0,passive:!0})}const Nt=100;function le(e,n,t){const{throttled:o,cancel:s}=(0,T.n)(i=>{const a=R(i);if(!a)return;const u=t.nodeIds.get(a);if(u===void 0||(0,f.PJ)(a,t.configuration.defaultPrivacyLevel)===f.$m.HIDDEN)return;const d=a===document?{scrollTop:(0,f.zL)(),scrollLeft:(0,f.Gn)()}:{scrollTop:Math.round(a.scrollTop),scrollLeft:Math.round(a.scrollLeft)};t.elementsScrollPositions.set(a,d),n(N(I.Scroll,{id:u,x:d.scrollLeft,y:d.scrollTop}))},Nt),{stop:r}=(0,M.q)(t.configuration,e,"scroll",o,{capture:!0,passive:!0});return{stop:()=>{r(),s()}}}const vt=200;function Ct(e,n){const t=(0,f.g1)(n.configuration).subscribe(o=>{e(N(I.ViewportResize,o))});return{stop:()=>{t.unsubscribe()}}}function wt(e,n){const t=window.visualViewport;if(!t)return{stop:T.l};const{throttled:o,cancel:s}=(0,T.n)(()=>{e({data:se(t),type:y.VisualViewport,timestamp:(0,m.nx)()})},vt,{trailing:!1}),{stop:r}=(0,M.l)(n.configuration,t,["resize","scroll"],o,{capture:!0,passive:!0});return{stop:()=>{r(),s()}}}function bt(e,n){return(0,M.l)(n.configuration,document,["play","pause"],t=>{const o=R(t);if(!o)return;const s=n.nodeIds.get(o);s===void 0||(0,f.PJ)(o,n.configuration.defaultPrivacyLevel)===f.$m.HIDDEN||e(N(I.MediaInteraction,{id:s,type:t.type==="play"?D.Play:D.Pause}))},{capture:!0,passive:!0})}var C=S(26336);function Mt(e,n){function t(r,i){if(!r||!r.ownerNode)return;const a=n.nodeIds.get(r.ownerNode);a!==void 0&&i(a)}const o=[(0,C.H)(CSSStyleSheet.prototype,"insertRule",({target:r,parameters:[i,a]})=>{t(r,u=>e(N(I.StyleSheetRule,{id:u,adds:[{rule:i,index:a}]})))}),(0,C.H)(CSSStyleSheet.prototype,"deleteRule",({target:r,parameters:[i]})=>{t(r,a=>e(N(I.StyleSheetRule,{id:a,removes:[{index:i}]})))})];typeof CSSGroupingRule<"u"?s(CSSGroupingRule):(s(CSSMediaRule),s(CSSSupportsRule));function s(r){o.push((0,C.H)(r.prototype,"insertRule",({target:i,parameters:[a,u]})=>{t(i.parentStyleSheet,d=>{const l=fe(i);l&&(l.push(u||0),e(N(I.StyleSheetRule,{id:d,adds:[{rule:a,index:l}]})))})}),(0,C.H)(r.prototype,"deleteRule",({target:i,parameters:[a]})=>{t(i.parentStyleSheet,u=>{const d=fe(i);d&&(d.push(a),e(N(I.StyleSheetRule,{id:u,removes:[{index:d}]})))})}))}return{stop:()=>{o.forEach(r=>r.stop())}}}function fe(e){const n=[];let t=e;for(;t.parentRule;){const i=Array.from(t.parentRule.cssRules).indexOf(t);n.unshift(i),t=t.parentRule}if(!t.parentStyleSheet)return;const s=Array.from(t.parentStyleSheet.cssRules).indexOf(t);return n.unshift(s),n}function Rt(e,n){return(0,M.l)(n.configuration,window,["focus","blur"],()=>{e({data:{has_focus:document.hasFocus()},type:y.Focus,timestamp:(0,m.nx)()})})}function xt(e,n,t){const o=e.subscribe(12,s=>{var r,i;s.rawRumEvent.type===f.bb.ACTION&&s.rawRumEvent.action.type===f.X2.CLICK&&(!((i=(r=s.rawRumEvent.action.frustration)===null||r===void 0?void 0:r.type)===null||i===void 0)&&i.length)&&"events"in s.domainContext&&s.domainContext.events&&s.domainContext.events.length&&n({timestamp:s.rawRumEvent.date,type:y.FrustrationRecord,data:{frustrationTypes:s.rawRumEvent.action.frustration.type,recordIds:s.domainContext.events.map(a=>t.eventIds.getOrInsert(a))}})});return{stop:()=>{o.unsubscribe()}}}function At(e,n,t){const o=e.subscribe(5,()=>{t(),n({timestamp:(0,m.nx)(),type:y.ViewEnd})});return{stop:()=>{o.unsubscribe()}}}function pe(e,n,t){const o=t.configuration.defaultPrivacyLevel,s=new WeakMap,r=e!==document,{stop:i}=(0,M.l)(t.configuration,e,r?["change"]:["input","change"],l=>{const c=R(l);(c instanceof HTMLInputElement||c instanceof HTMLTextAreaElement||c instanceof HTMLSelectElement)&&u(c)},{capture:!0,passive:!0});let a;if(r)a=T.l;else{const l=[(0,C.t)(HTMLInputElement.prototype,"value",u),(0,C.t)(HTMLInputElement.prototype,"checked",u),(0,C.t)(HTMLSelectElement.prototype,"value",u),(0,C.t)(HTMLTextAreaElement.prototype,"value",u),(0,C.t)(HTMLSelectElement.prototype,"selectedIndex",u)];a=()=>{l.forEach(c=>c.stop())}}return{stop:()=>{a(),i()}};function u(l){const c=(0,f.PJ)(l,o);if(c===f.$m.HIDDEN)return;const p=l.type;let h;if(p==="radio"||p==="checkbox"){if((0,f.Ie)(l,c))return;h={isChecked:l.checked}}else{const x=P(l,c);if(x===void 0)return;h={text:x}}d(l,h);const v=l.name;p==="radio"&&v&&l.checked&&document.querySelectorAll(`input[type="radio"][name="${CSS.escape(v)}"]`).forEach(x=>{x!==l&&d(x,{isChecked:!1})})}function d(l,c){const p=t.nodeIds.get(l);if(p===void 0)return;const h=s.get(l);(!h||h.text!==c.text||h.isChecked!==c.isChecked)&&(s.set(l,c),n(N(I.Input,{id:p,...c})))}}var Dt=S(55520),Ot=S(87898);const zt=100,Pt=16;function Lt(e){let n=T.l,t=[];function o(){n(),e(t),t=[]}const{throttled:s,cancel:r}=(0,T.n)(o,Pt,{leading:!1});return{addMutations:i=>{t.length===0&&(n=(0,Ot.BB)(s,{timeout:zt})),t.push(...i)},flush:o,stop:()=>{n(),r()}}}function he(e,n,t,o,s=Vt()){const r=(0,f.W3)();if(!r)return{stop:T.l,flush:T.l};const i=Lt(u=>{s((0,m.nx)(),u.concat(a.takeRecords()),n,t,o)}),a=new r((0,Dt.dm)(i.addMutations));return a.observe(e,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:()=>{a.disconnect(),i.stop()},flush:()=>{i.flush()}}}function Vt(){return tt}function kt(){const e=new WeakMap;return{set(n,t){n===document&&!document.scrollingElement||e.set(n===document?document.scrollingElement:n,t)},get(n){return e.get(n)},has(n){return e.has(n)}}}const Ft=(e,n)=>{const t=new Map;return{addShadowRoot:(s,r)=>{if(t.has(s))return;const i=he(s,e,n,r),a=pe(s,e,r),u=le(s,e,r);t.set(s,{flush:()=>i.flush(),stop:()=>{i.stop(),a.stop(),u.stop()}})},removeShadowRoot:s=>{const r=t.get(s);r&&(r.stop(),t.delete(s))},stop:()=>{t.forEach(({stop:s})=>s())},flush:()=>{t.forEach(({flush:s})=>s())}}};function _t(){return H(1)}function Ht(){return H(0)}function $t(){return Bt(0)}function Ut(){return H(0)}function Bt(e){return ge(()=>new Map,e)}function H(e){return ge(()=>new WeakMap,e)}function ge(e,n){let t=e(),o=n;const s=r=>t.get(r);return{clear(){o!==n&&(t=e(),o=n)},delete(r){t.delete(r)},get:s,getOrInsert(r){let i=s(r);return i===void 0&&(i=o++,t.set(r,i)),i},get nextId(){return o},get size(){return o-n}}}function Gt(e,n,t){const o=_t(),s=Ht(),r=$t(),i=Ut(),a={resetIds(){a.eventIds.clear(),a.nodeIds.clear(),a.stringIds.clear(),a.styleSheetIds.clear()},configuration:e,elementsScrollPositions:n,eventIds:o,nodeIds:s,shadowRootsController:t,stringIds:r,styleSheetIds:i};return a}function Jt(e){const{emitRecord:n,emitStats:t,configuration:o,lifeCycle:s}=e;if(!n||!t)throw new Error("emit functions are required");const r=p=>{n(p),(0,yt.b)("record",{record:p});const h=e.viewHistory.findView();z.$1(h.id)},i=Ft(r,t),a=Gt(o,kt(),i),{stop:u}=dt(s,r,t,d,a);function d(){i.flush(),l.flush()}const l=he(document,r,t,a),c=[l,Tt(r,a),Et(r,a),le(document,r,a),Ct(r,a),pe(document,r,a),bt(r,a),Mt(r,a),Rt(r,a),wt(r,a),xt(s,r,a),At(s,r,d)];return{stop:()=>{i.stop(),c.forEach(p=>p.stop()),u()},flushMutations:d,shadowRootsController:i}}var Xt=S(33076),Se=S(47391);function Yt(e,n,t,o){const s=new FormData;s.append("segment",new Blob([e],{type:"application/octet-stream"}),`${n.session.id}-${n.start}`);const r={raw_segment_size:o,compressed_segment_size:e.byteLength,...n},i=JSON.stringify(r);return s.append("event",new Blob([i],{type:"application/json"})),{data:s,bytesCount:e.byteLength,cssText:t.cssText,isFullSnapshot:n.index_in_view===0,rawSize:o,recordCount:n.records_count,serializationDuration:t.serializationDuration}}function Wt({context:e,creationReason:n,encoder:t}){let o=0;const s=e.view.id,r=z.K_(s),i={start:1/0,end:-1/0,creation_reason:n,records_count:0,has_full_snapshot:!1,index_in_view:r,source:"browser",...e},a=F();z.H5(s);function u(c,p){i.start=Math.min(i.start,c.timestamp),i.end=Math.max(i.end,c.timestamp),i.records_count+=1,i.has_full_snapshot||(i.has_full_snapshot=c.type===y.FullSnapshot||c.type===y.Change&&i.index_in_view===0);const h=t.isEmpty?'{"records":[':",";t.write(h+JSON.stringify(c),v=>{o+=v,p(o)})}function d(c){He(a,c)}function l(c){if(t.isEmpty)throw new Error("Empty segment flushed");t.write(`],${JSON.stringify(i).slice(1)}
`),t.finish(p=>{z.L7(i.view.id,p.rawBytesCount),c(i,a,p)})}return{addRecord:u,addStats:d,flush:l}}const jt=5*m.OY;let $=6e4;function Kt(e,n,t,o,s,r){return Zt(e,()=>Qt(n.applicationId,t,o),s,r)}function Zt(e,n,t,o){let s={status:0,nextSegmentCreationReason:"init"};const{unsubscribe:r}=e.subscribe(2,()=>{a("view_change")}),{unsubscribe:i}=e.subscribe(11,u=>{a(u.reason)});function a(u){s.status===1&&(s.segment.flush((d,l,c)=>{const p=Yt(c.output,d,l,c.rawBytesCount);(0,Xt.Kp)(u)?t.sendOnExit(p):t.send(p)}),(0,Se.DJ)(s.expirationTimeoutId)),u!=="stop"?s={status:0,nextSegmentCreationReason:u}:s={status:2}}return{addRecord:u=>{if(s.status!==2){if(s.status===0){const d=n();if(!d)return;s={status:1,segment:Wt({encoder:o,context:d,creationReason:s.nextSegmentCreationReason}),expirationTimeoutId:(0,Se.wg)(()=>{a("segment_duration_limit")},jt)}}s.segment.addRecord(u,d=>{d>$&&a("segment_bytes_limit")})}},addStats:u=>{s.status===1&&s.segment.addStats(u)},stop:()=>{a("stop"),r(),i()}}}function Qt(e,n,t){const o=n.findTrackedSession(),s=t.findView();if(!(!o||!s))return{application:{id:e},session:{id:o.id},view:{id:s.id}}}function cn(e=6e4){$=e}function qt(e,n){if(!e.metricsEnabled)return{stop:T.l};const{unsubscribe:t}=n.subscribe(o=>{if(o.type==="failure"||o.type==="queue-full"||o.type==="success"&&o.payload.isFullSnapshot){const s=en(o.type,o.bandwidth,o.payload);(0,U.Gk)("Segment network request metrics",{metrics:s})}});return{stop:t}}function en(e,n,t){return{cssText:{count:t.cssText.count,max:t.cssText.max,sum:t.cssText.sum},encoding:{fullSnapshot:(0,A.sr)(A.R9.USE_CHANGE_RECORDS)?"change":"v1",incrementalSnapshot:"v1"},isFullSnapshot:t.isFullSnapshot,ongoingRequests:{count:n.ongoingRequestCount,totalSize:n.ongoingByteCount},recordCount:t.recordCount,result:e,serializationDuration:{count:t.serializationDuration.count,max:t.serializationDuration.max,sum:t.serializationDuration.sum},size:{compressed:t.bytesCount,raw:t.rawSize}}}function tn(e){const n=(0,B.Y9)();return{addRecord:t=>{const o=e.findView();n.send("record",t,o.id)}}}function nn(e,n,t,o,s,r,i){const a=[],u=h=>{e.notify(14,{error:h}),(0,U.A2)("Error reported to customer",{"error.message":h.message})},d=i||(0,ye.sA)([n.sessionReplayEndpointBuilder],u,$);let l,c;if((0,B.d0)())({addRecord:l}=tn(o)),c=T.l;else{const h=Kt(e,n,t,o,d,s);l=h.addRecord,c=h.addStats,a.push(h.stop);const v=qt(r,d.observable);a.push(v.stop)}const{stop:p}=Jt({emitRecord:l,emitStats:c,configuration:n,lifeCycle:e,viewHistory:o});return a.push(p),{stop:()=>{a.forEach(h=>h())}}}}}]);
